(this["webpackJsonpmovie-catalogue"]=this["webpackJsonpmovie-catalogue"]||[]).push([[0],{32:function(e,t,a){e.exports=a.p+"static/media/no_poster.a9af4f3f.jpg"},53:function(e,t,a){e.exports=a.p+"static/media/no_poster_album.8d55f821.jpg"},58:function(e,t,a){e.exports=a(90)},89:function(e,t,a){},90:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"startLoading",(function(){return f})),a.d(n,"stopLoading",(function(){return C})),a.d(n,"clearAllUserData",(function(){return N})),a.d(n,"fetchMoviesFavorite",(function(){return T})),a.d(n,"updateMoviesFavorite",(function(){return A})),a.d(n,"fetchMoviesWillWatch",(function(){return R})),a.d(n,"updateMoviesWillWatch",(function(){return I})),a.d(n,"fetchGenres",(function(){return w})),a.d(n,"fetchMovies",(function(){return L})),a.d(n,"setSortBy",(function(){return M})),a.d(n,"setCurrentYear",(function(){return j})),a.d(n,"setActivePage",(function(){return k})),a.d(n,"setSelectedGenres",(function(){return F})),a.d(n,"clearAllFilters",(function(){return U})),a.d(n,"setFavouriteMovie",(function(){return D})),a.d(n,"setWatchList",(function(){return P})),a.d(n,"fetchMovieById",(function(){return G})),a.d(n,"clearCurrentMovie",(function(){return B})),a.d(n,"fetchMovieVideosById",(function(){return V})),a.d(n,"fetchMovieActorsById",(function(){return H}));var r={};a.r(r),a.d(r,"login",(function(){return x})),a.d(r,"fetchAuth",(function(){return W})),a.d(r,"updateAuth",(function(){return Y})),a.d(r,"userLogout",(function(){return Q})),a.d(r,"logout",(function(){return q})),a.d(r,"toggleLoginModal",(function(){return J})),a.d(r,"clearLoginErrors",(function(){return z}));var c=a(0),s=a.n(c),o=a(16),l=a.n(o),i=a(26),m=a(11),d=a(20),u=a(13),E=a(39),v=a.n(E),p=a(51);var h=a(4),_=a(33),g=a.n(_);const b="https://api.themoviedb.org/3",y="8c25628d17af8bc23ca51c3561b5b636",O=(e,t={})=>new Promise((a,n)=>{fetch(e,t).then(e=>{if(e.status<400)return e.json();throw e}).then(e=>{a(e)}).catch(e=>{e.json().then(e=>{n(e)})})});class S{static get(e,t={}){const a=t.params,n=void 0===a?{}:a,r=Object(h.a)({api_key:y},n);return O("".concat(b).concat(e,"?").concat(g.a.stringify(r)),{mode:"cors",headers:{"Content-type":"application/json"}})}static post(e,t={}){const a=t.params,n=void 0===a?{}:a,r=t.body,c=void 0===r?{}:r,s=Object(h.a)({api_key:y},n);return O("".concat(b).concat(e,"?").concat(g.a.stringify(s)),{method:"POST",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(c)})}static delete(e,t={}){const a=t.params,n=void 0===a?{}:a,r=t.body,c=void 0===r?{}:r,s=Object(h.a)({api_key:y},n);return O("".concat(b).concat(e,"?").concat(g.a.stringify(s)),{method:"DELETE",mode:"cors",headers:{"Content-type":"application/json"},body:JSON.stringify(c)})}}const f=()=>e=>{e({type:"START_LOADING"})},C=()=>e=>{e({type:"STOP_LOADING"})},N=()=>e=>{e({type:"CLEAR_ALL_USER_DATA"})},T=({user:e,session_id:t})=>a=>{S.get("/account/".concat(e.id,"/favorite/movies"),{params:{session_id:t}}).then(e=>{a(A(e.results))})},A=e=>({type:"UPDATE_MOVIES_FAVORITE",payload:e}),R=({user:e,session_id:t})=>a=>{S.get("/account/".concat(e.id,"/watchlist/movies"),{params:{session_id:t}}).then(e=>{a(I(e.results))})},I=e=>({type:"UPDATE_MOVIES_WILL_WATCH",payload:e}),w=()=>e=>{e({type:"FETCH_GENRES"}),S.get("/genre/movie/list").then(t=>e({type:"FETCH_GENRES_SUCCESS",payload:t.genres})).catch(t=>e({type:"FETCH_GENRES_ERROR",payload:t}))},L=(e=1)=>(t,a)=>{t({type:"FETCH_MOVIES"});const n=a().movie,r=n.sortBy,c=n.currentYear,s=n.genresSelected;let o="";s.forEach(e=>o+=e+",");const l={sort_by:r,page:e,primary_release_year:c,with_genres:o};S.get("/discover/movie",{params:l}).then(e=>t({type:"FETCH_MOVIES_SUCCESS",payload:{movies:e.results,totalPages:e.total_pages}})).catch(e=>t({type:"FETCH_MOVIES_ERROR",payload:e}))},M=e=>t=>{t({type:"SET_SORT_BY",payload:e})},j=e=>t=>{t({type:"SET_CURRENT_YEAR",payload:e})},k=e=>t=>{t({type:"SET_ACTIVE_PAGE",payload:e})},F=({checked:e,value:t})=>(a,n)=>{let r=[...n().movie.genresSelected];e?r.push(parseInt(t)):r=n().movie.genresSelected.filter(e=>e!==parseInt(t)),a({type:"SET_SELECTED_GENRES",payload:r})},U=e=>e=>{e({type:"CLEAR_ALL_FILTERS"})},D=(e,t)=>(a,n)=>{const r=n().auth,c=r.user,s=r.sessionId,o=n().movie.moviesFavourite;S.post("/account/".concat(c.id,"/favorite"),{params:{session_id:s},body:{media_type:"movie",media_id:e.id,favorite:t}}).then(n=>{if(1===n.status_code||13===n.status_code){let n;t?(n=[...o],n.push(e)):n=o.filter(t=>t.id!==e.id),a(A(n))}})},P=(e,t)=>(a,n)=>{const r=n().auth,c=r.user,s=r.sessionId,o=n().movie.moviesWillWatch;S.post("/account/".concat(c.id,"/watchlist"),{params:{session_id:s},body:{media_type:"movie",media_id:e.id,watchlist:t}}).then(n=>{if(1===n.status_code||13===n.status_code){let n;t?(n=[...o],n.push(e)):n=o.filter(t=>t.id!==e.id),a(I(n))}})},G=e=>t=>{t({type:"START_LOADING"}),t({type:"FETCH_MOVIE_BY_ID"}),S.get("/movie/".concat(e)).then(e=>{t({type:"FETCH_MOVIE_BY_ID_SUCCESS",payload:e}),t({type:"STOP_LOADING"})}).catch(e=>{t({type:"FETCH_MOVIE_BY_ID_ERROR",payload:e}),t({type:"STOP_LOADING"})})},B=()=>e=>{e({type:"CLEAR_CURRENT_MOVIE"})},V=e=>t=>{t({type:"START_LOADING"}),t({type:"FETCH_MOVIE_VIDEOS_BY_ID"}),S.get("/movie/".concat(e,"/videos")).then(e=>{t({type:"FETCH_MOVIE_VIDEOS_BY_ID_SUCCESS",payload:e.results}),t({type:"STOP_LOADING"})}).catch(e=>t({type:"FETCH_MOVIE_VIDEOS_BY_ID_ERROR",payload:e}))},H=e=>t=>{t({type:"START_LOADING"}),t({type:"FETCH_MOVIE_ACTORS_BY_ID"}),S.get("/movie/".concat(e,"/credits")).then(e=>{t({type:"FETCH_MOVIE_ACTORS_BY_ID_SUCCESS",payload:e.cast}),t({type:"STOP_LOADING"})}).catch(e=>t({type:"FETCH_MOVIE_ACTORS_BY_ID_ERROR",payload:e}))},x=({username:e,password:t})=>function(){var a=Object(p.a)(v.a.mark((function a(n){var r,c,s;return v.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,n({type:"REQUEST_LOGIN"}),a.next=4,S.get("/authentication/token/new");case 4:return r=a.sent,a.next=7,S.post("/authentication/token/validate_with_login",{body:{username:e,password:t,request_token:r.request_token}});case 7:return c=a.sent,a.next=10,S.post("/authentication/session/new",{body:{request_token:c.request_token}});case 10:s=a.sent,n(W(s.session_id)),a.next=18;break;case 14:a.prev=14,a.t0=a.catch(0),n({type:"REQUEST_LOGIN_ERROR",payload:a.t0}),console.log("error",a.t0);case 18:case"end":return a.stop()}}),a,null,[[0,14]])})));return function(e){return a.apply(this,arguments)}}(),W=e=>t=>{t({type:"FETCH_REQUEST_AUTH"}),S.get("/account",{params:{session_id:e}}).then(a=>{t(Y({user:a,session_id:e})),t(T({user:a,session_id:e})),t(R({user:a,session_id:e}))}).catch(e=>{t({type:"FETCH_AUTH_ERROR",payload:e})})},Y=({user:e,session_id:t})=>({type:"FETCH_AUTH_SUCCESS",payload:{user:e,session_id:t}}),Q=e=>t=>{t({type:"REQUEST_LOGOUT"}),S.delete("/authentication/session",{body:{session_id:e}}).then(()=>t(q())).catch(e=>{t({type:"REQUEST_LOGOUT_ERROR",payload:e})})},q=()=>({type:"REQUEST_LOGOUT_SUCCESS"}),J=()=>({type:"TOGGLE_LOGIN_MODAL"}),z=()=>({type:"CLEAR_LOGIN_ERRORS"}),K=e=>({auth:e.auth}),X=e=>({authActions:Object(u.bindActionCreators)(r,e)}),Z=e=>Object(i.b)(K,X)(class extends s.a.Component{render(){return s.a.createElement(e,this.props)}}),$=e=>({movie:e.movie}),ee=e=>({movieActions:Object(u.bindActionCreators)(n,e)}),te=e=>Object(i.b)($,ee)(class extends s.a.Component{render(){return s.a.createElement(e,this.props)}});var ae=a(101),ne=a(118),re=a(120),ce=a(102);class se extends s.a.Component{constructor(...e){super(...e),this.state={dropdownOpen:!1},this.toggle=()=>{this.setState(e=>({dropdownOpen:!e.dropdownOpen}))},this.handleLogOut=()=>{this.props.authActions.userLogout(this.props.auth.sessionId),this.props.movieActions.clearAllUserData()}}render(){const e=this.state.dropdownOpen,t=this.props.auth.user;return s.a.createElement(ae.a,{isOpen:e,toggle:this.toggle},s.a.createElement(ne.a,{tag:"div","data-toggle":"dropdown","aria-expanded":e},s.a.createElement("div",{onClick:this.toggle},s.a.createElement("img",{className:"rounded mr-2",alt:"avatar",src:"https://secure.gravatar.com/avatar/".concat(t.avatar.gravatar.hash,'.jpg?s=32"')}),s.a.createElement("span",{className:"text-light"},t.username))),s.a.createElement(re.a,{right:!0},s.a.createElement(ce.a,{onClick:this.handleLogOut},"Logout"),s.a.createElement(ce.a,{onClick:this.toggle},s.a.createElement(m.b,{to:"/favorite"},"My favorite movies")),s.a.createElement(ce.a,{onClick:this.toggle},s.a.createElement(m.b,{to:"/willwatch"},"My will watch list"))))}}var oe=Z(te(se));var le=Z((function(e){const t=e.auth,a=e.authActions;return s.a.createElement("nav",{className:"navbar sticky-top navbar-dark bg-dark"},s.a.createElement("ul",{className:"navbar-nav"},s.a.createElement("li",{className:"nav-item"},s.a.createElement(m.b,{className:"nav-link",to:"/"},"Home"))),t.user?s.a.createElement(oe,null):s.a.createElement("button",{className:"btn btn-outline-primary my-2 my-sm-0",type:"button",onClick:a.toggleLoginModal},"Log in"))})),ie=a(119),me=a(103);class de extends s.a.Component{constructor(...e){super(...e),this.state={username:"",password:"",repeatPassword:"",errors:{},submitting:!1},this.onChangeInput=e=>{const t=e.target.name,a=e.target.value;this.setState(e=>({[t]:a,errors:Object(h.a)(Object(h.a)({},e.errors),{},{base:null,[t]:null})}))},this.handleBlur=e=>{const t=e.target.name,a=this.validateFields()[t];a&&this.setState(e=>({errors:Object(h.a)(Object(h.a)({},e.errors),{},{[t]:a})})),this.props.authActions.clearLoginErrors()},this.validateFields=()=>{const e={};return""===this.state.username&&(e.username="Username is required"),""===this.state.password&&(e.password="Password is required"),this.state.password.length<5&&(e.password="Your password it too small"),e},this.onLogin=e=>{e.preventDefault();let t=this.validateFields();Object.keys(t).length>0?this.setState(e=>({errors:Object(h.a)(Object(h.a)({},e.errors),t)})):this.sendPromisesAsync()},this.sendPromisesAsync=()=>{const e=this.state,t=e.username,a=e.password;this.setState({submitting:!0}),this.props.authActions.login({username:t,password:a}).then(()=>{this.props.auth.errors?this.setState({submitting:!1,errors:{base:this.props.auth.errors.base}}):(this.setState({submitting:!1}),this.props.authActions.toggleLoginModal())})}}render(){const e=this.state,t=e.username,a=e.password,n=(e.repeatPassword,e.errors),r=e.submitting;return s.a.createElement("div",null,s.a.createElement("h1",null,"Log into your account"),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"username"},"Username"),s.a.createElement("input",{id:"username",type:"text",className:n.username?"form-control invalid":"form-control",placeholder:"username",name:"username",value:t,onChange:this.onChangeInput,onBlur:this.handleBlur}),n.username&&s.a.createElement("div",{className:"invalid-feedback"},n.username)),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"password"},"Password"),s.a.createElement("input",{id:"password",type:"password",className:n.password?"form-control invalid":"form-control",placeholder:"password",name:"password",value:a,onChange:this.onChangeInput,onBlur:this.handleBlur}),n.password&&s.a.createElement("div",{className:"invalid-feedback"},n.password)),s.a.createElement("button",{className:"btn btn-block btn-primary my-2 my-sm-0",type:"submit",disabled:r,onClick:this.onLogin},"Log in"),n.base&&s.a.createElement("div",{className:"invalid-feedback text-center"},n.base))}}var ue=Z(de);var Ee=Z((function(e){const t=e.auth,a=e.authActions;return s.a.createElement(ie.a,{isOpen:t.showLoginModal,toggle:a.toggleLoginModal},s.a.createElement(me.a,null,s.a.createElement(ue,null)))})),ve=a(104),pe=a(105),he=a(106),_e=a(107);var ge=Z(te((function(e){const t=e.currentMovie,a=e.auth.user,n=e.movie,r=n.moviesFavourite,c=n.moviesWillWatch,o=e.movieActions,l=o.setWatchList,i=o.setFavouriteMovie,m=(e,t)=>!!t.map(e=>e.id).find(t=>t===e.id);let d=m(t,r),u=m(t,c);return a?s.a.createElement("div",null,d&&s.a.createElement(ve.a,{color:"secondary",className:"icon",onClick:()=>i(t,!1)}),!d&&s.a.createElement(pe.a,{color:"secondary",className:"icon",onClick:()=>i(t,!0)}),u&&s.a.createElement(he.a,{className:"icon",onClick:()=>l(t,!1)}),!u&&s.a.createElement(_e.a,{className:"icon",onClick:()=>l(t,!0)})):s.a.createElement(s.a.Fragment,null)}))),be=a(53),ye=a.n(be);var Oe=function(e){const t=e.movie,a=t.title,n=t.backdrop_path,r=t.overview,c=t.vote_average,o=t.id;return s.a.createElement("div",{className:"card"},s.a.createElement("img",{className:"card-img-top",src:(l=n,l?"https://image.tmdb.org/t/p/w500".concat(l):ye.a),alt:a}),s.a.createElement("div",{className:"card-body"},s.a.createElement("div",{className:"card-title"},s.a.createElement(m.b,{to:"/movie/".concat(o,"/detail")},a),s.a.createElement("span",{className:"badge badge-warning"},c)),s.a.createElement(ge,{currentMovie:t}),s.a.createElement("button",{type:"button",className:"btn btn-block btn-outline-dark mt-2","data-toggle":"modal","data-target":"#itemModal-".concat(o)},"About")),s.a.createElement("div",{id:"itemModal-".concat(o),className:"modal fade",tabIndex:"-1",role:"dialog","aria-labelledby":"#modalTitle-".concat(o),"aria-hidden":"true"},s.a.createElement("div",{className:"modal-dialog",role:"document"},s.a.createElement("div",{className:"modal-content"},s.a.createElement("div",{className:"modal-header"},s.a.createElement("h5",{className:"modal-title",id:"#modalTitle-".concat(o)},a),s.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},s.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),s.a.createElement("div",{className:"modal-body"},s.a.createElement("p",null,r))))));var l};var Se=te((function(e){const t=e.movies;return s.a.createElement("div",{className:"row"},t.map(e=>s.a.createElement("div",{key:e.id,className:"col-12 mb-4 col-sm-6 col-lg-4"},s.a.createElement(Oe,{movie:e}))))}));var fe=te((function(e){const t=e.movie.moviesWillWatch;return s.a.createElement("div",null,s.a.createElement("h4",null,"Will watch ",t.length," movies"),s.a.createElement("ul",{className:"list-group"},t.map((e,t)=>s.a.createElement("li",{key:t,className:"list-group-item"},s.a.createElement(m.b,{to:"/movie/".concat(e.id,"/detail")},e.title)))))}));var Ce=te((function(e){const t=e.movie.sortBy,a=e.movieActions,n=a.setSortBy,r=a.fetchMovies;return s.a.createElement("ul",{className:"nav nav-tabs nav-pills"},[{title:"Popularity desc",sortBy:"popularity.desc"},{title:"Revenue desc",sortBy:"revenue.desc"},{title:"Release date desc",sortBy:"release_date.desc"}].map(e=>{return s.a.createElement("li",{key:e.sortBy,className:"nav-item"},s.a.createElement("div",{className:(a=e.sortBy,"nav-link ".concat(t===a?"active":"")),onClick:()=>(e=>{n(e),r()})(e.sortBy)},e.title));var a}))}));function Ne(e){const t=e.label,a=e.active,n=e.disabled,r=e.onClickPage,c=e.item;return s.a.createElement("li",{className:"page-item\n      ".concat(a?"active":"","\n      ").concat(n?"disabled":"","\n      ")},s.a.createElement("button",{className:"page-link",onClick:()=>r(c)},t))}var Te=te((function(e){let t=e.movie,a=t.activePage,n=t.totalPages,r=e.movieActions,c=r.setActivePage,o=r.fetchMovies,l=[],i=Math.max(a-2,1),m=Math.min(a+2,n);const d=e=>{c(e),o(e)};for(let u=i;u<=m;u++)l.push(s.a.createElement(Ne,{active:u===a,key:u,label:u,onClickPage:d,item:u}));return s.a.createElement("nav",{"aria-label":"Page navigation"},s.a.createElement("ul",{className:"pagination"},s.a.createElement(Ne,{label:"\u226a",onClickPage:d,item:1,disabled:1===a}),s.a.createElement(Ne,{label:"<",onClickPage:d,item:a-1,disabled:1===a}),a-2>1&&s.a.createElement(s.a.Fragment,null,s.a.createElement(Ne,{label:1,onClickPage:d,item:1}),s.a.createElement(Ne,{label:"...",disabled:!0})),l,a+2<n&&s.a.createElement(s.a.Fragment,null,s.a.createElement(Ne,{label:"...",disabled:!0}),s.a.createElement(Ne,{label:n,onClickPage:d,item:n})),s.a.createElement(Ne,{label:">",onClickPage:d,item:a+1,disabled:a===n}),s.a.createElement(Ne,{label:"\u226b",onClickPage:d,item:n,disabled:a===n})))}));var Ae=te((function(e){const t=e.movie.currentYear,a=e.movieActions,n=a.setCurrentYear,r=a.fetchMovies;return s.a.createElement("select",{className:"custom-select custom-select mb-3 mt-3",onChange:e=>{n(parseInt(e.target.value)),r()},value:t},[2025,2024,2023,2022,2021,2020,2019,2018,2017,2016,2015].map(e=>s.a.createElement("option",{key:e,value:e},e)))}));var Re=te((function(e){const t=e.movie,a=t.genres,n=t.genresSelected,r=e.movieActions,c=r.setSelectedGenres,o=r.fetchMovies,l=e=>{const t=e.target,a=t.checked,n=t.value;c({checked:a,value:n}),o()};return s.a.createElement("div",null,s.a.createElement("h4",null,"Select genres"),a.map(e=>s.a.createElement("div",{className:"form-group",key:e.id},s.a.createElement("div",{className:"form-check"},s.a.createElement("input",{className:"form-check-input",type:"checkbox",name:"genres",value:e.id,id:e.id,onChange:l,checked:n.includes(e.id)}),s.a.createElement("label",{className:"form-check-label",htmlFor:e.id},e.name)))))}));var Ie=te((function(e){const t=e.movie.movies,a=e.movieActions,n=a.clearCurrentMovie,r=a.fetchGenres,o=a.fetchMovies,l=a.clearAllFilters;return Object(c.useEffect)(()=>{n(),r(),o()},[]),s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row mt-3"},s.a.createElement("div",{className:"col-8"},s.a.createElement("div",{className:"row mb-3"},s.a.createElement("div",{className:"col"},s.a.createElement(Ce,null))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement(Se,{movies:t}))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col"},s.a.createElement(Te,null)))),s.a.createElement("div",{className:"col-4"},s.a.createElement(fe,null),s.a.createElement("button",{className:"btn btn-primary btn-block mt-3",onClick:()=>{l(),o()}},"Clear all filters"),s.a.createElement(Ae,null),s.a.createElement(Re,null))))})),we=a(116),Le=a(117),Me=a(108),je=a(109),ke=a(110),Fe=a(111),Ue=a(112),De=a(113),Pe=a(114),Ge=a(32),Be=a.n(Ge);var Ve=te((function(e){const t=e.movie,a=t.currentMovie,n=t.currentMovieActors,r=t.isLoading;return Object(c.useEffect)(()=>{0===n.length&&e.movieActions.fetchMovieActorsById(a.id)},[]),r?s.a.createElement(Me.a,{style:{width:"3rem",height:"3rem"},type:"grow"}):0===n.length?s.a.createElement("div",null):s.a.createElement(je.a,{className:"mx-3"},n.map((e,t)=>{return s.a.createElement("div",{key:t},s.a.createElement(ke.a,{inverse:!0,style:{maxWidth:"300px"}},s.a.createElement(Fe.a,{src:(a=e.profile_path,a?"https://image.tmdb.org/t/p/w500".concat(a):Be.a),alt:e.name}),s.a.createElement(Ue.a,null,s.a.createElement(De.a,null,s.a.createElement(Pe.a,{color:"dark",className:"text-wrap"},"".concat(e.character," / ").concat(e.name))))));var a}))})),He=a(115);var xe=te((function(e){const t=e.movie.currentMovie;return s.a.createElement(He.a,null,s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",null,"Tagline"),s.a.createElement("td",null,t.tagline)),s.a.createElement("tr",null,s.a.createElement("td",null,"Rating"),s.a.createElement("td",null,s.a.createElement(Pe.a,{color:"success"},"".concat(t.vote_average," (").concat(t.vote_count,")")))),s.a.createElement("tr",null,s.a.createElement("td",null,"Genres"),s.a.createElement("td",null,t.genres.map(e=>s.a.createElement(Pe.a,{key:e.id,color:"warning",pill:!0},e.name)))),s.a.createElement("tr",null,s.a.createElement("td",null,"Runtime"),s.a.createElement("td",null,t.runtime," min")),s.a.createElement("tr",null,s.a.createElement("td",null,"Status"),s.a.createElement("td",null,t.status)),s.a.createElement("tr",null,s.a.createElement("td",null,"Release date"),s.a.createElement("td",null,t.release_date)),s.a.createElement("tr",null,s.a.createElement("td",null,"Country"),s.a.createElement("td",null,t.production_countries.map((e,t)=>s.a.createElement("span",{key:t},e.name," "))))))}));var We=te((function(e){const t=e.movie,a=t.currentMovie,n=t.currentMovieVideos,r=t.isLoading;return Object(c.useEffect)(()=>{0===n.length&&e.movieActions.fetchMovieVideosById(a.id)},[]),r?s.a.createElement(Me.a,{style:{width:"3rem",height:"3rem"},type:"grow"}):0===n.length?s.a.createElement("div",null):s.a.createElement("div",{className:"row"},n.map(e=>s.a.createElement("div",{key:e.id,className:"col-3 mb-2"},s.a.createElement("a",{target:"_blank",href:"http://www.youtube.com/watch?v=".concat(e.key),rel:"noopener noreferrer"},s.a.createElement("img",{className:"img-fluid",src:"https://img.youtube.com/vi/".concat(e.key,"/default.jpg"),alt:e.name})))))}));var Ye=te((function(e){Object(c.useEffect)(()=>{const t=e.match.params.id;e.movieActions.fetchMovieById(t)},[]);const t=e.movie.currentMovie;if(null===t)return s.a.createElement("div",null);const a=t.title,n=t.overview,r=t.poster_path;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row mt-3"},s.a.createElement("div",{className:"col"},s.a.createElement("div",{className:"card mb-3"},s.a.createElement("div",{className:"row no-gutters"},s.a.createElement("div",{className:"col-md-4"},s.a.createElement("img",{className:"card-img-top",src:(o=r,o?"https://image.tmdb.org/t/p/w500".concat(o):Be.a),alt:a})),s.a.createElement("div",{className:"col-md-8"},s.a.createElement("div",{className:"card-body"},s.a.createElement("h5",{className:"card-title display-4 text-center"},a),s.a.createElement("p",{className:"card-text"},n),s.a.createElement(ge,{currentMovie:t}))))),s.a.createElement("div",null,s.a.createElement(we.a,{tabs:!0,className:"my-2"},s.a.createElement(Le.a,null,s.a.createElement(m.c,{className:"nav-link",to:"/movie/".concat(t.id,"/detail")},"Details")),s.a.createElement(Le.a,null,s.a.createElement(m.c,{className:"nav-link",to:"/movie/".concat(t.id,"/videos")},"Video")),s.a.createElement(Le.a,null,s.a.createElement(m.c,{className:"nav-link",to:"/movie/".concat(t.id,"/credit")},"Credits"))),s.a.createElement(d.c,null,s.a.createElement(d.a,{path:"/movie/:id/detail"},s.a.createElement(xe,null)),s.a.createElement(d.a,{path:"/movie/:id/videos"},s.a.createElement(We,null)),s.a.createElement(d.a,{path:"/movie/:id/credit"},s.a.createElement(Ve,null)))))));var o}));var Qe=te((function(e){const t=e.movie.moviesFavourite;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row mt-3"},s.a.createElement("div",{className:"col"},s.a.createElement(Se,{movies:t}))))}));var qe=te((function(e){const t=e.movie.moviesWillWatch;return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"row mt-3"},s.a.createElement("div",{className:"col"},s.a.createElement(Se,{movies:t}))))}));class Je extends s.a.Component{componentDidMount(){const e=this.props,t=e.auth,a=e.authActions;t.sessionId?a.fetchAuth(t.sessionId):a.toggleLoginModal()}render(){const e=this.props.auth,t=e.sessionId,a=e.isAuth,n=e.showLoginModal;return a||!t?s.a.createElement(m.a,{basename:"/"},s.a.createElement(le,null),n&&s.a.createElement(Ee,null),s.a.createElement(d.a,{exact:!0,path:"/"}," ",s.a.createElement(Ie,null)),s.a.createElement(d.a,{path:"/favorite"}," ",s.a.createElement(Qe,null)),s.a.createElement(d.a,{path:"/willwatch"}," ",s.a.createElement(qe,null)),s.a.createElement(d.a,{path:"/movie/:id",render:e=>s.a.createElement(Ye,e)})):s.a.createElement("p",null,"...Loading")}}var ze=Z(Je),Ke=(a(86),a(87),a(89),a(54)),Xe=a(55);const Ze=new(a(56).a),$e={user:null,sessionId:Ze.get("session_id"),isAuth:!1,showLoginModal:!1,errors:null};var et=(e=$e,t)=>{const a=t.type,n=t.payload;switch(a){case"FETCH_AUTH_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{user:n.user,sessionId:n.session_id,isAuth:!0});case"REQUEST_LOGOUT_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{user:null,sessionId:null,isAuth:!1});case"TOGGLE_LOGIN_MODAL":return Object(h.a)(Object(h.a)({},e),{},{showLoginModal:!e.showLoginModal});case"REQUEST_LOGIN_ERROR":return Object(h.a)(Object(h.a)({},e),{},{errors:{base:n.status_message}});case"CLEAR_LOGIN_ERRORS":return Object(h.a)(Object(h.a)({},e),{},{errors:null});default:return e}};const tt={errors:null,isLoading:!1,moviesFavourite:[],moviesWillWatch:[],movies:[],genres:[],genresSelected:[],sortBy:"popularity.desc",currentYear:(new Date).getFullYear(),activePage:1,totalPages:0,currentMovie:null,currentMovieVideos:[],currentMovieActors:[]};var at=(e=tt,t)=>{const a=t.type,n=t.payload;switch(a){case"START_LOADING":return Object(h.a)(Object(h.a)({},e),{},{isLoading:!0});case"STOP_LOADING":return Object(h.a)(Object(h.a)({},e),{},{isLoading:!1});case"UPDATE_MOVIES_FAVORITE":return Object(h.a)(Object(h.a)({},e),{},{moviesFavourite:n});case"UPDATE_MOVIES_WILL_WATCH":return Object(h.a)(Object(h.a)({},e),{},{moviesWillWatch:n});case"FETCH_GENRES_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{genres:n});case"FETCH_GENRES_ERROR":return Object(h.a)(Object(h.a)({},e),{},{errors:n});case"FETCH_MOVIES_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{movies:n.movies,totalPages:n.totalPages});case"SET_SORT_BY":return Object(h.a)(Object(h.a)({},e),{},{sortBy:n,activePage:1});case"SET_CURRENT_YEAR":return Object(h.a)(Object(h.a)({},e),{},{currentYear:n,activePage:1});case"SET_SELECTED_GENRES":return Object(h.a)(Object(h.a)({},e),{},{genresSelected:n,activePage:1});case"SET_ACTIVE_PAGE":return Object(h.a)(Object(h.a)({},e),{},{activePage:n});case"CLEAR_ALL_FILTERS":return Object(h.a)(Object(h.a)({},e),{},{genresSelected:[],sortBy:"popularity.desc",activePage:1,currentYear:2020});case"FETCH_MOVIE_BY_ID_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{currentMovie:n});case"CLEAR_CURRENT_MOVIE":return Object(h.a)(Object(h.a)({},e),{},{currentMovie:null,currentMovieVideos:[],currentMovieActors:[]});case"FETCH_MOVIE_BY_ID_ERROR":return Object(h.a)(Object(h.a)({},e),{},{errors:n});case"FETCH_MOVIE_VIDEOS_BY_ID_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{currentMovieVideos:n});case"FETCH_MOVIE_ACTORS_BY_ID_SUCCESS":return Object(h.a)(Object(h.a)({},e),{},{currentMovieActors:n});case"CLEAR_ALL_USER_DATA":return Object(h.a)(Object(h.a)({},e),{},{moviesFavourite:[],moviesWillWatch:[]});default:return e}},nt=Object(u.combineReducers)({auth:et,movie:at});var rt=Object(u.createStore)(nt,Object(Xe.composeWithDevTools)(Object(u.applyMiddleware)(Ke.a,({dispatch:e,getState:t})=>e=>t=>("FETCH_AUTH_SUCCESS"===t.type&&Ze.set("session_id",t.payload.session_id,{path:"/",maxAge:2592e3}),"REQUEST_LOGOUT_SUCCESS"===t.type&&Ze.remove("session_id"),e(t)))));l.a.render(s.a.createElement(i.a,{store:rt},s.a.createElement(ze,null)),document.getElementById("root"))}},[[58,1,2]]]);
//# sourceMappingURL=main.fb21061e.chunk.js.map